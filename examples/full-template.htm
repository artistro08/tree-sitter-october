url = "/blog"
layout = "default"
title = "Blog Posts"

[component]
posts = "blogPosts"
postsPerPage = 10
==
<?php
use Acme\Blog\Classes\Post;
use Acme\Blog\Classes\Category;

function onStart()
{
    $this['posts'] = Post::get();
    $this['categories'] = Category::all();
}

function onLoadMore()
{
    $this['posts'] = Post::paginate(10);
}
?>
==
{% page %}
<h1>{{ title }}</h1>

{% for post in posts %}
    <h2>{{ post.title }}</h2>
    <img src="{{ post.image|media|resize(800, 600) }}">
    <p>{{ post.content }}</p>
{% endfor %}

{% component 'blogPosts' %}
